<section class="cliente-container">
  @if (loading) {
    <div class="loading">Cargando...</div>
  } @else if (error) {
    <div class="error">{{ error }}</div>
  } @else {
    <h1>¡Bienvenido, {{ user?.name }}!</h1>
    <div class="cliente-perfil">
      <img src="https://ui-avatars.com/api/?name={{user?.name}}+{{user?.lastname}}&background=random" alt="Foto de perfil" />
      <div>
        <h2>{{ user?.name }} {{ user?.lastname }}</h2>
        <p>Email: {{ user?.email }}</p>
        <button class="edit-button">Editar perfil</button>
      </div>
    </div>

    <div class="cliente-historial">
      <h3>Últimas compras</h3>
      @if (orders.length === 0) {
        <p>No hay compras registradas</p>
      } @else {
        <table>
          <thead>
            <tr>
              <th>Producto</th>
              <th>Fecha</th>
              <th>Estado</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            @for (order of orders; track order.id) {
              <tr>
                <td>{{ order.productName }}</td>
                <td>{{ order.date | date:'dd/MM/yyyy' }}</td>
                <td>
                  <span [class]="'status-' + order.status.toLowerCase()">
                    {{ order.status }}
                  </span>
                </td>
                <td>${{ order.total.toFixed(2) }}</td>
              </tr>
            }
          </tbody>
        </table>
      }
    </div>
  }
</section>
